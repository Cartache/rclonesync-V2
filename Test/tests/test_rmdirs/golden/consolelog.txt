
:MSG: test_rmdirs


:MSG:	Initial rclonesync --first-sync

../rclonesync.py ./testdir/path1/ ./testdir/path2/ --first-sync --verbose --workdir ./testwd/ --no-datetime-log --no-cleanup --rclone rclone --config /home/cjn/.config/rclone/rclone.conf
***** BiDirectional Sync for Cloud Services using rclone (V3.0 200813) *****
Lock file created: </tmp/rclonesync_LOCK_._testdir_path1_._testdir_path2_>
Synching Path1  <./testdir/path1/>  with Path2  <./testdir/path2/>
Command args: <Path1=./testdir/path1/, Path2=./testdir/path2/, check_access=False, check_filename=RCLONE_TEST, config=/home/cjn/.config/rclone/rclone.conf, dry_run=False, filters_file=None, first_sync=True, force=False, max_deletes=50, no_cleanup=True, no_datetime_log=True, rc_verbose=None, rclone=rclone, rclone_args=None, remove_empty_directories=False, verbose=1, workdir=./testwd/>
>>>>> --first-sync copying any unique Path2 files to Path1
>>>>> Path1 Checking for Diffs
>>>>> Path2 Checking for Diffs
>>>>> No changes on Path2 - Skipping ahead
>>>>> Synching Path1 to Path2
>>>>> Refreshing Path1 and Path2 lsl files
Lock file removed: </tmp/rclonesync_LOCK_._testdir_path1_._testdir_path2_>
>>>>> Successful run.  All done.


:MSG:	1) Delete Path1 subdir/file20.txt

rclone delete ./testdir/path1/subdir/file20.txt

:MSG:	2) rclonesync without --remove-empty-directories

../rclonesync.py ./testdir/path1/ ./testdir/path2/ --verbose --workdir ./testwd/ --no-datetime-log --no-cleanup --rclone rclone --config /home/cjn/.config/rclone/rclone.conf
***** BiDirectional Sync for Cloud Services using rclone (V3.0 200813) *****
Lock file created: </tmp/rclonesync_LOCK_._testdir_path1_._testdir_path2_>
Synching Path1  <./testdir/path1/>  with Path2  <./testdir/path2/>
Command args: <Path1=./testdir/path1/, Path2=./testdir/path2/, check_access=False, check_filename=RCLONE_TEST, config=/home/cjn/.config/rclone/rclone.conf, dry_run=False, filters_file=None, first_sync=False, force=False, max_deletes=50, no_cleanup=True, no_datetime_log=True, rc_verbose=None, rclone=rclone, rclone_args=None, remove_empty_directories=False, verbose=1, workdir=./testwd/>
>>>>> Path1 Checking for Diffs
  Path1      File was deleted                  - subdir/file20.txt
     1 file change(s) on Path1:    0 new,    0 newer,    0 older,    1 deleted
>>>>> Path2 Checking for Diffs
>>>>> No changes on Path2 - Skipping ahead
>>>>> Synching Path1 to Path2
>>>>> Refreshing Path1 and Path2 lsl files
Lock file removed: </tmp/rclonesync_LOCK_._testdir_path1_._testdir_path2_>
>>>>> Successful run.  All done.


:MSG:	3) Confirm subdir exists on both paths

rclone lsf --dirs-only -R ./testdir/path1/
subdir/
rclone lsf --dirs-only -R ./testdir/path2/
subdir/

:MSG:	4) rclonesync with --remove-empty-directories

../rclonesync.py ./testdir/path1/ ./testdir/path2/ --remove-empty-directories --verbose --workdir ./testwd/ --no-datetime-log --no-cleanup --rclone rclone --config /home/cjn/.config/rclone/rclone.conf
***** BiDirectional Sync for Cloud Services using rclone (V3.0 200813) *****
Lock file created: </tmp/rclonesync_LOCK_._testdir_path1_._testdir_path2_>
Synching Path1  <./testdir/path1/>  with Path2  <./testdir/path2/>
Command args: <Path1=./testdir/path1/, Path2=./testdir/path2/, check_access=False, check_filename=RCLONE_TEST, config=/home/cjn/.config/rclone/rclone.conf, dry_run=False, filters_file=None, first_sync=False, force=False, max_deletes=50, no_cleanup=True, no_datetime_log=True, rc_verbose=None, rclone=rclone, rclone_args=None, remove_empty_directories=True, verbose=1, workdir=./testwd/>
>>>>> Path1 Checking for Diffs
>>>>> Path2 Checking for Diffs
>>>>> No changes on Path2 - Skipping ahead
>>>>> No changes on Path1 or Path2 - Skipping sync from Path1 to Path2
>>>>> rmdirs Path1
>>>>> rmdirs Path2
>>>>> Refreshing Path1 and Path2 lsl files
Lock file removed: </tmp/rclonesync_LOCK_._testdir_path1_._testdir_path2_>
>>>>> Successful run.  All done.


:MSG:	5) Confirm subdir has been removed on both paths

rclone lsf --dirs-only -R ./testdir/path1/
rclone lsf --dirs-only -R ./testdir/path2/
